<!DOCTYPE html>
<html>
    <head>
        <title>Build Awesome REST APIs With Symfony2 | Lukas Kahwe Smith, William Durand</title>
        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/serif-theme.css" id="theme">
        <link rel="stylesheet" href="css/zenburn.css">
        <link rel="stylesheet" href="css/pageNumbers.css">
        <link rel="stylesheet" href="css/custom.css">
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1 class="title">Build Awesome REST APIs With Symfony2</h1>
                    <em>Lukas Kahwe Smith, William Durand - December 12, 2013</em>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## FOSRestBundle

                        * Toolbox of services and listeners to build RESTful APIs
                        * Generate HTML, XML, JSON from a single Controller action
                        * Automatic generation of routes from Controller actions
                        * Accept header negotiation
                        * Request body decoding
                        * GET parameter parsing and validation
                        * Integration with Symfony2 serializer and JMSSerializerBundle
                        * Integration with SensioFrameworkExtraBundle
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## FOSRestBundle

                            class RestController
                            {
                                /**
                                 * Get the list of articles
                                 * route name: liip_hello_rest_get_articles
                                 * pattern: /liip/hello/rest/articles.{_format}
                                 * http method requirement: GET
                                 *
                                 * @View()
                                 * @QueryParam(name="page", requirements="\d+", default="1")
                                 */
                                public function getArticlesAction($page)
                                {
                                    $articles = array('bim', 'bam', 'bingo');
                                    return new \Acme\MyBundle\MyResponse($articles, $page);
                                }
                            }
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## FOSRestBundle

                        ```
                        <html>
                            <body>
                                <div>
                                    <div>bim</div>
                                    <div>bam</div>
                                    <div>bingo</div>
                                </div>
                                <div>page: 2</div>
                            </body>
                        </html>
                        ```
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## FOSRestBundle

                        ```
                        <response page="2">
                            <article>bim</article>
                            <article>bam</article>
                            <article>bingo</article>
                        </response>
                        ```
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## FOSRestBundle

                        ```
                        {
                          "articles": [
                            "bim",
                            "bam",
                            "bingo"
                          ],
                          "page": "2"
                        }
                        ```
                    </script>
                </section>
                <section>
                    <h1 class="title">Media Types and Conten Type Negotiation</h1>
                    <em>A short excursion</em>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Unified Resource Identifier

                        * URIs identify resources
                        * URIs are format independent
                        * URI "file extensions" != RESTful
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Media Types

                        * Identifies a representation format
                        * Custom types «application/vnd.»
                        * Used inside the Accept / Content-Type headers

                        | Header       | Description                     |
                        | ------------ |---------------------------------|
                        | Content-Type | HTTP message format             |
                        | Accept       | HTTP response format preference |
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Content Type Negotiation

                        * Finding appropriate response format
                        * No standardized algorithm available
                        * But Apache [mod_negotiation](http://httpd.apache.org/docs/2.4/content-negotiation.html) algorithm is well documented
                        * Also covers encoding (Accept-Encoding) and language (Accept-Language) negotiation
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Content Type Negotiation

                        ``Accept: application/json,application/xml;q=0.9,text/html;q=0.8,tex/*;q=0.7,*/*;q=0.5``

                        | Priority |        Description                  |
                        | -------- |-------------------------------------|
                        | q=0.9    | application/json or application/xml |
                        | q=0.8    | text/html                           |
                        | q=0.7    | text/* (any text)                   |
                        | q=0.5    | */* (anything)                      |
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## JMSSerializerBundle

                        * Integrates the JMS serializer component with Symfony2
                        * Enables (de)serialization of object graphs
                        * Implements visitor pattern to enable flexibility
                        * Fully leverage native JSON and XML
                        * Custom exclusion strategies to determine what to serialize
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## JMSSerializerBundle

                        ```
                        use JMS\SerializerBundle\Annotation as Serializer;
                         
                        /** @Serializer\XmlRoot("response") */
                        class MyResponse
                        {
                            /** * @Serializer\XmlList(inline=true, entry="article") */
                            protected $articles;
                         
                            /** * @Serializer\XmlAttribute() */
                            protected $page;
                         
                            public function __construct(Collection $articles, $page)
                            {
                                $this->articles = $articles;
                                $this->page = $page;
                            }
                        }
                        ```
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## BazingaHateoasBundle

                        ..
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## RMM Level 3

                        ..
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## TemplateUriBundle

                        ..
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## RFC-6570

                        ..
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## NelmioApiDocBundle

                        ..
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Demo Time
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Thank You.

                        ### Questions?
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## LiipCacheControlBundle

                        * Response listener to add Cache-Control headers
                        * Listener matches the Request path/host/method/attributes
                        * Varnish helper class to assist in purging/banning content
                        * Listener to return a 200 response for HEAD requests after the security listener has finished
                        * Listener to move flash messages into a cookie
                    </script>
                </section>
            </div>
        </div>
        <script type="text/javascript" src="js/head.min.js"></script>
        <script type="text/javascript" src="js/reveal.min.js"></script>
        <script type="text/javascript">
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                theme: Reveal.getQueryHash().theme,
                transition: Reveal.getQueryHash().transition || 'concave',

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'js/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'js/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'js/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'js/pageNumbers.js' },
                ]
            });
        </script>
    </body>
</html>
