<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
    <head>

        <!-- To render these slides you need Slippy https://github.com/Seldaek/slippy -->

        <title>There is a Bundle for that</title>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <meta name="author" content="Friends of Symfony" />
        <meta name="email" content="friendsofsymfony-dev@googlegroups.com" />
        <meta name="date" content="2012-06-02" />
        <meta name="venue" content="The Internets" />

        <!-- Slippy core file and dependencies -->
        <script type="text/javascript" src="jquery.min.js"></script>
        <script type="text/javascript" src="jquery.history.js"></script>
        <script type="text/javascript" src="slippy.js"></script>
        <!-- Slippy structural styles -->
        <link type="text/css" rel="stylesheet" href="slippy.css"/>
        <!-- Slippy theme -->
        <link type="text/css" rel="stylesheet" href="slippy-pure.css"/>
        <!-- Syntax highlighting core file  -->
        <script type="text/javascript" src="highlighter/shCore.js"></script>
        <!-- Syntax highlighting brushes, remove those you don't need -->
        <script type="text/javascript" src="highlighter/shBrushPhp.js"></script>
        <script type="text/javascript" src="highlighter/shBrushPlain.js"></script>
        <script type="text/javascript" src="highlighter/shBrushXml.js"></script>
        <!-- Syntax highlighting styles-->
        <link type="text/css" rel="stylesheet" href="highlighter/shCore.css"/>
        <link type="text/css" rel="stylesheet" href="highlighter/shThemeEclipse.css"/>

        <style type="text/css">
            body > * {
                font-size: 1.2em;
            }

            body {
                background: #fff;
            }

            div.syntaxhighlighter {
                background: #aaa !important;
            }

            span.file {
                font-size: 0.8em;
                color: #f00;
                float: right;
                margin: -.2em .5em 0 0;
            }

            .smallcode {
                font-size: 0.8em;
            }

            strong {
                color: #662222;
            }
        </style>
        <!-- Slippy init code -->
        <script type="text/javascript">
            $(function() {
                $(".slide").slippy({
                });
                SyntaxHighlighter.all();
            });
        </script>
    </head>

    <body>
        <div class="slide" style="text-align:center">
            <h2>There is a Bundle for that</h2>
        </div>

        <div class="slide">
            <h2>Lukas Kahwe Smith</h2>

            <ul>
                <li>PEAR Group founder</li>
                <li>PHP 5.3 co-release manager</li>
                <li>Symfony2, Doctrine, PHPCR, Jackalope ..</li>
                <li>unofficial liason between Symfony2 and Drupal</li>
                <li><a href="http://pooteeweet.org">http://pooteeweet.org</a> | <a href="http://twitter.com/lsmith">@lsmith</a></li>
            </ul>
        </div>

        <div class="slide">
            <h2>Christophe Coevoet</h2>

            <ul>
                <li>Symfony2, Doctrine, Monolog, FOSUserBundle ..</li>
                <li>Code reviewer on many libraries</li>
                <li><a href="http://twitter.com/Stof70">@Stof70</a></li>
            </ul>
        </div>

        <div class="slide">
            <h2>What is a Bundle?</h2>
            <ul>
                <li>A reusable piece of code for Symfony2 projects</li>
                <li>But think about standalone libraries too</li>
                <li>A set of Controllers and/or CLI Commands</li>
                <li>The minimal glue code to integrate a library with Symfony2</li>
            </ul>
        </div>

        <div class="slide">
            <h2>What can Bundle do?</h2>
            <ul>
                <li>A Bundle can provide Controllers</li>
                <li>A Bundle can provide Commands</li>
                <li>A Bundle can provide entities/documents</li>
                <li>A Bundle can provide services</li>
                <li>A Bundle can provide assets</li>
            </ul>
        </div>

        <div class="slide">
            <h2>Unofficial Bundle index: knpbundles.com</h2>
            <ul>
                <li>Automatically indexes code that looks like a Bundle</li>
                <li>Generates a point value based on followers and some simple metrics (README yes/no, Travis-CI yes/no, recent activity ..)</li>
            </ul>
        </div>

        <div class="slide">
            <h2>Bundles best practices: <a href="http://symfony.com/doc/current/cookbook/bundles/best_practices.html">Bundle dir structure</a></h2>
            <ul>
                <li>MyBundle.php</li>
                <li>Command
                    <ul>
                        <li>MyCommand.php</li>
                    </ul>
                </li>
                <li>Controller
                    <ul>
                        <li>MyController.php</li>
                    </ul>
                </li>
                <li>Entity/Document
                    <ul>
                        <li>User.php</li>
                        <li>UserRepository.php</li>
                    </ul>
                </li>
                <li>Resources
                    <ul>
                        <li>config</li>
                        <li>doc</li>
                        <li>meta</li>
                        <li>public</li>
                        <li>views</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="slide">
            <h2>Bundles best practices: <a href="http://symfony.com/doc/current/cookbook/bundles/extension.html">DIC configuration</a></h2>
            <ul>
                <li>Prefix all services with the Bundle alias (ie. MyExtension::getAlias())</li>
                <li>Explicitly handle any configurable parameters</li>
                <li>Use compiler passes to interact with other Bundles services</li>
                <li>DependencyInjection
                    <ul>
                        <li>Compiler
                            <ul>
                                <li>MyCompilerPass.php</li>
                            </ul>
                        </li>
                        <li>Configuration.php</li>
                        <li>MyExtension.php</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="slide">
            <h2>Bundles best practices: Configuration class</h2>
            <ul>
                <li>..</li>
            </ul>
        </div>

        <div class="slide">
            <h2>Bundles best practices: <a href="http://getcomposer.org/">Composer</a></h2>
            <ul>
                <li>Default dependency management as of Symfony 2.1</li>
                <li>Bundles should be registered on <a href="http://packagist.org/">Packagist</a></li>
                <li>Make sure to enable the "Packagist" commit hook</li>
            </ul>
        </div>

        <div class="slide">
            <h2>Bundles best practices: Tests</h2>
            <ul>
                <li>Use JMSCommandBundle to generate Kernels for functional tests</li>
                <li>phpunit.xml.dist</li>
                <li>Tests
                    <ul>
                        <li>Controller
                            <ul>
                                <li>MyControllerTest.php</li>
                            </ul>
                        </li>
                        <li>..</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="slide">
            <h2>Bundles best practices: <a href="http://travis-ci.org/">Travis-CI</a></h2>
            <ul>
                <li>Free hosted CI for open-source projects</li>
                <li>.travis.yml</li>
            </ul>
        </div>

        <div class="slide">
            <h2>How to extend a Bundle</h2>
            <ul>
                <li>http://symfony.com/doc/current/cookbook/bundles/inheritance.html</li>
            </ul>
        </div>

        <div class="slide">
            <h2>How to fix a bug and submit a PR</h2>
            <ul>
                <li><a href="https://github.com/signup/free">Setup a github account</a></li>
                <li>Browse to the file and click edit (TODO: link)</li>
                <li>Or branch, commit, fork, change your remote, push, open PR (TODO: commands)</li>
            </ul>
        </div>

        <div class="slide">
            <h2>FOSUserBundle</h2>
            <ul>
                <li>Provides user management for your project</li>
                <li>Registration, password resetting...</li>
                <li>Supports Doctrine ORM, MongoDB, CouchDB, Propel... and your own</li>
            </ul>
        </div>

        <div class="slide">
            <h2>JMSSerializerBundle</h2>
            <ul>
                <li>Expands on the core Serializer</li>
                <li>Implements visitor pattern to give more flexibility</li>
                <li>More flexible handling to return different structures for JSON and XML</li>
                <li>Most effective when (de)serializing from/to Object Graphs</li>
                <li>Additional features like versioning, group based serialization rule sets etc.</li>
            </ul>
        </div>

        <div class="slide">
            <h2>JMSSerializerBundle</h2>
            <pre class="brush: php">
use JMS\SerializerBundle\Annotation as Serializer;
use JMS\SerializerBundle\Annotation\XmlList;

use Doctrine\Common\Collections\Collection;

class Response
{
    /**
     * @var Collection
     * @XmlList(inline = true, entry = "article")
     */
    protected $articles;

    protected $page;

    public function __construct(Collection $a, $page)
    {
        $this->articles = $a;
        $this->page = $page;
    }
}            </pre>
        </div>

        <div class="slide">
            <h2>FOSRestBundle</h2>
            <ul>
                <li>Provides a set of services and listeners to help in building REST APIs</li>
                <ul>
                    <li>View layer using JMSSerializerBundle to support HTML, XML, JSON from a single Controller action</li>
                    <li>Automatic generation of routes from Controller actions</li>
                    <li>Accept header negotiation</li>
                    <li>Request body decoding</li>
                    <li>GET parameter parsing and validation</li>
                </ul>
            </ul>
        </div>

        <div class="slide">
            <h2>FOSRestBundle</h2>
            <pre class="brush: php">
class RestController extends Controller
{
    /**
     * Get the list of articles
     *
     * @param string $page page number
     * @return array data
     *
     * @View()
     * @QueryParam(name="page", requirements="\d+", default="1")
     * @ApiDoc()
     */
    public function getArticlesAction($page)
    {
        $articles = array('bim', 'bam', 'bingo');

        return new ArticleCollection($articles);
    }
}
            </pre>
        </div>

        <div class="slide">
            <h2>JMSSecurityExtraBundle</h2>
            <ul>
                <li>..</li>
            </ul>
        </div>

        <div class="slide">
            <h2>StofDoctrineExtensionBundle</h2>
            <ul>
                <li>..</li>
            </ul>
        </div>

        <div class="slide">
            <h2>LiipImagineBundle</h2>
            <ul>
                <li>..</li>
            </ul>
        </div>

        <div class="slide">
            <h2>KnpMenuBundle</h2>
            <ul>
                <li>..</li>
            </ul>
        </div>

        <div class="slide">
            <div class="vcenter">
                <h2>.. and what are you looking for?</h2>

                <h2>.. tell us what feature you need in your next project and lets see if we can find a Bundle for you ..</h2>
            </div>
        </div>

        <div class="slide">
            <h2>Github projects</h2>
            <ul>
                <li><a href="http://friendsofsymfony.github.com/">Github organization</a></li>
            </ul>
        </div>

        <div class="slide">
            <h2>Resources</h2>
            <ul>
                <li><a href="irc://freenode/#symfony">#symfony IRC</a></li>
                <li><a href="http://knpbundles.com">http://knpbundles.com</a></li>
            </ul>
        </div>

        <div class="layout" data-name="default">
            <div class="vcenter">
                <content></content>
            </div>
        </div>

        <div class="footer">
            <span class="right"><a href="irc://freenode/#symfony">#symfony IRC</a></span>
            <span class="left"><a href="http://friendsofsymfony.github.com/">friendsofsymfony.github.com/</a></span>
            <hr class="defloat" />
        </div>
    </body>
</html>
